var Mahjongg=Ember.Application.create({rootElement:"#mahjongg"});Mahjongg.Tile=Ember.Object.extend({i:-1,j:-1,k:-1,tile:-1,selected:false,visible:true,clickable:true,cssClass:(function(){return"tile-"+this.get("tile")}).property("cssClass"),position:(function(){var c=50+18*this.get("i");var b=48+24*this.get("j");var a=2*this.get("k")+1;return"left:"+c+"px;top:"+b+"px;z-index:"+a+";"}).property("position"),shadowPosition:(function(){var c=50+18*this.get("i");var b=48+24*this.get("j");var a=2*this.get("k");return"left:"+c+"px;top:"+b+"px;z-index:"+a+";"}).property("shadowPosition")});Mahjongg.Board=Ember.Object.extend({width:30,height:16,depth:5,generate:function(){var b=[];for(var d=0;d<this.get("width");d++){b[d]=[];for(var c=0;c<this.get("height");c++){b[d][c]=[];for(var a=0;a<this.get("depth");a++){b[d][c][a]=undefined}}}this.set("tiles",b)},createLayout:function(){var b,a;for(b=1;b<=12;b++){this.putTile(b*2,0*2,0);this.putTile(b*2,3*2,0);this.putTile(b*2,4*2,0);this.putTile(b*2,7*2,0)}for(b=3;b<=10;b++){this.putTile(b*2,1*2,0);this.putTile(b*2,6*2,0)}for(b=2;b<=11;b++){this.putTile(b*2,2*2,0);this.putTile(b*2,5*2,0)}this.putTile(0*2,3*2+1,0);this.putTile(13*2,3*2+1,0);this.putTile(14*2,3*2+1,0);for(b=4;b<=9;b++){for(a=1;a<=6;a++){this.putTile(b*2,a*2,1)}}for(b=5;b<=8;b++){for(a=2;a<=5;a++){this.putTile(b*2,a*2,2)}}for(b=6;b<=7;b++){for(a=3;a<=4;a++){this.putTile(b*2,a*2,3)}}this.putTile(6*2+1,3*2+1,4)},putTile:function(d,c,b){var a=this.get("tiles");a[d][c][b]=-1},randomizeLayout:function(){var f,g,e,c,b;var h=this.get("tiles");var a=this.get("width");var l=this.get("height");var d=this.get("depth");for(f=1;f<=34;f++){for(g=0;g<4;g++){do{e=Math.floor((Math.random()*a));c=Math.floor((Math.random()*l));b=Math.floor((Math.random()*d))}while(!h[e][c][b]||h[e][c][b]!=-1);h[e][c][b]=Mahjongg.Tile.create({i:e,j:c,k:b,tile:f})}}for(f=35;f<=42;f++){do{e=Math.floor((Math.random()*a));c=Math.floor((Math.random()*l));b=Math.floor((Math.random()*d))}while(!h[e][c][b]||h[e][c][b]!=-1);h[e][c][b]=Mahjongg.Tile.create({i:e,j:c,k:b,tile:f})}},tilesArray:(function(){var a=[];var c=this.get("tiles");for(var e=0;e<this.get("width");e++){for(var d=0;d<this.get("height");d++){for(var b=0;b<this.get("depth");b++){if(c[e][d][b]){a.push(c[e][d][b])}}}}return a}).property("tilesArray")});Mahjongg.IndexRoute=Ember.Route.extend({setupController:function(a){Ember.run.later(function(){var b=Mahjongg.Board.create();b.generate();b.createLayout();b.randomizeLayout();a.set("content",b);a.set("state","game")},750)}});Mahjongg.IndexController=Ember.Controller.extend({state:"loading",actions:{clickTile:function(a){a.set("selected",!a.get("selected"))}}});